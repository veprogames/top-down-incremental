[gd_scene load_steps=18 format=4 uid="uid://blpfg0kc3wacb"]

[ext_resource type="Texture2D" uid="uid://rbcfgod2ii5f" path="res://level/tiles/grass.png" id="1_3sncf"]
[ext_resource type="Script" path="res://level/level.gd" id="1_08xo1"]
[ext_resource type="PackedScene" uid="uid://oyiycif2f18h" path="res://player/player.tscn" id="1_c1fdt"]
[ext_resource type="PackedScene" uid="uid://yam6ts6l84j0" path="res://player/ui/player_damage_display.tscn" id="1_sr8ao"]
[ext_resource type="Texture2D" uid="uid://ki05rasve8x" path="res://level/tiles/water.png" id="3_5xm1u"]
[ext_resource type="Texture2D" uid="uid://bg4cey1lk6jk0" path="res://level/tiles/sand.png" id="3_r522a"]
[ext_resource type="PackedScene" uid="uid://gbdae67q3h10" path="res://player/player_camera.tscn" id="3_wppie"]
[ext_resource type="PackedScene" uid="uid://dc8blsf65d7qp" path="res://player/player_damage.tscn" id="3_xo2ng"]
[ext_resource type="PackedScene" uid="uid://cfb3ump5ftuba" path="res://player/ui/player_health_bar.tscn" id="5_614nh"]
[ext_resource type="TileSet" uid="uid://yyvnjlmy5w6q" path="res://level/tiles/tileset.tres" id="5_l032b"]
[ext_resource type="PackedScene" uid="uid://b23dh2uhv8tvh" path="res://level/ui/level_time.tscn" id="6_u8prs"]
[ext_resource type="PackedScene" uid="uid://brn8qtcwgwwuq" path="res://spawner/level_spawner.tscn" id="7_geyi5"]
[ext_resource type="PackedScene" uid="uid://bvo27dq1r1rt3" path="res://level/ui/game_over_screen.tscn" id="13_23rtj"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_vjv4r"]
normal = Vector2(1, 0)

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_pa783"]
normal = Vector2(-1, 0)

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_wudsr"]
normal = Vector2(0, 1)

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_u1xbg"]

[node name="Level" type="Node2D"]
script = ExtResource("1_08xo1")

[node name="Water" type="Sprite2D" parent="."]
texture_repeat = 2
texture = ExtResource("3_5xm1u")
region_enabled = true
region_rect = Rect2(0, 0, 4000, 4000)

[node name="Sand" type="Sprite2D" parent="."]
texture_repeat = 2
texture = ExtResource("3_r522a")
region_enabled = true
region_rect = Rect2(0, 0, 2000, 2000)

[node name="Grass" type="Sprite2D" parent="."]
texture_repeat = 2
texture = ExtResource("1_3sncf")
region_enabled = true
region_rect = Rect2(0, 0, 1950, 1950)

[node name="TileMapLayerBase" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAAAAAAAAACAAEAAAABAAAAAAADAAIAAAABAAEAAAADAAMAAAAAAAEAAAABAAIAAAD//wEAAAABAAIAAAD//wAAAAACAAEAAAD/////AAADAAAAAAAAAP//AAADAAAAAAABAP//AAAAAAAAAAD+/wEAAAABAAIAAAD+/wAAAAACAAEAAAD+////AAADAAAAAAD9/wEAAAABAAIAAAD9/wAAAAACAAEAAAD9////AAADAAAAAAD8/wEAAAABAAIAAAD8/wAAAAACAAEAAAD8////AAADAAAAAAD7/wEAAAABAAIAAAD7/wAAAAACAAEAAAD7////AAADAAAAAAD6/wEAAAABAAIAAAD6/wAAAAACAAEAAAD6////AAADAAAAAAD5/wEAAAABAAIAAAD5/wAAAAACAAEAAAD5////AAADAAAAAAD4/wEAAAABAAIAAAD4/wAAAAACAAEAAAD4////AAADAAAAAAD3/wEAAAABAAIAAAD3/wAAAAACAAEAAAD3////AAADAAAAAAD2/wEAAAABAAIAAAD2/wAAAAACAAEAAAD2////AAADAAAAAAD1/wEAAAABAAIAAAD1/wAAAAACAAEAAAD1////AAADAAAAAAD0/wEAAAABAAIAAAD0/wAAAAACAAEAAAD0////AAADAAAAAADz/wEAAAABAAIAAADz/wAAAAACAAEAAADz////AAADAAAAAADy/wEAAAABAAIAAADy/wAAAAACAAEAAADy////AAACAAAAAADx/wEAAAABAAIAAADx/wAAAAACAAEAAADx////AAACAAEAAADw/wEAAAAAAAIAAADw/wAAAAABAAAAAADw////AAABAAAAAADw//7/AAABAAAAAADx//7/AAACAAEAAADy//7/AAADAAIAAADw//3/AAABAAAAAADx//3/AAACAAEAAADy//3/AAADAAIAAADw//z/AAABAAAAAADx//z/AAACAAEAAADy//z/AAADAAIAAADw//v/AAABAAAAAADx//v/AAACAAEAAADy//v/AAADAAIAAADw//r/AAABAAAAAADx//r/AAACAAEAAADy//r/AAADAAIAAADw//n/AAACAAIAAADx//n/AAACAAEAAADy//n/AAADAAIAAADw//j/AAACAAEAAADx//j/AAACAAEAAADy//j/AAADAAIAAADw//f/AAADAAAAAADx//f/AAADAAAAAADy//f/AAAAAAAAAADv//n/AAABAAIAAADv//j/AAACAAEAAADv//f/AAADAAAAAADu//n/AAABAAIAAADu//j/AAACAAEAAADu//f/AAADAAAAAADt//n/AAABAAIAAADt//j/AAACAAEAAADt//f/AAADAAAAAADs//n/AAABAAIAAADs//j/AAACAAEAAADs//f/AAADAAAAAADr//n/AAABAAIAAADr//j/AAACAAEAAADr//f/AAADAAAAAADq//n/AAABAAIAAADq//j/AAACAAEAAADq//f/AAADAAAAAADp//n/AAAAAAIAAADp//j/AAABAAAAAADp//f/AAABAAMAAAD3//3/AQABAAEAAAD9//n/AQABAAEAAAD+//z/AQABAAEAAAD3//n/AQABAAEAAADp//z/AgAAAAAAAADu//v/AQABAAEAAADr//7/AgAAAAEAAADt/wAAAgAAAAAAAAD1//v/AQABAAEAAAD6//r/AQABAAEAAADt//z/AgAAAAAAAADs//z/AgAAAAAAAADr//z/AgAAAAAAAADq//z/AgAAAAAAAADo//z/AgAAAAAAAADo//3/AgAAAAAAAADo//7/AgAAAAAAAADo////AgAAAAAAAADo/wAAAgAAAAAAAADo/wEAAgAAAAAAAADp/wEAAgAAAAAAAADq/wEAAgAAAAAAAADr/wEAAgAAAAAAAADs/wEAAgAAAAAAAADt/wEAAgAAAAAAAADt//3/AgAAAAAAAAD1//7/AQACAAEAAAD7//z/AQACAAEAAAD7//3/AQACAAEAAAD8//3/AQACAAEAAAD0//n/AQACAAEAAADx/wMAAQACAAEAAAD2/wMAAQAAAAEAAADu/wQAAQAAAAEAAAD5//v/AQAAAAEAAAD7/wMAAQAAAAAAAAD6/wMAAQAAAAAAAAD5/wMAAQAAAAAAAAD6/wIAAQAAAAAAAAD7/wIAAQAAAAAAAAD8/wIAAQAAAAAAAAD9/wIAAQAAAAAAAAD9/wMAAQAAAAAAAAD+/wMAAQAAAAAAAAD+/wQAAQAAAAAAAAD9/wQAAQAAAAAAAAD8/wQAAQAAAAAAAAD7/wQAAQAAAAAAAAD8/wMAAQAAAAAAAAD6/wQAAQAAAAAAAAD5/wQAAQAAAAAAAADt/wMAAQAAAAAAAADs/wMAAQAAAAAAAADr/wMAAQAAAAAAAADq/wQAAQAAAAAAAADp/wQAAQAAAAAAAADo/wQAAQAAAAAAAADo/wMAAQAAAAAAAADp/wMAAQAAAAAAAADq/wMAAQAAAAAAAADr/wQAAQAAAAAAAADp/wUAAQAAAAAAAADn/wQAAQAAAAAAAADn/wMAAQAAAAAAAAD5//f/AQAAAAAAAAD4//f/AQAAAAAAAAD4//j/AQAAAAAAAAD5//j/AQAAAAAAAAD6//j/AQAAAAAAAAD6//f/AQAAAAAAAAD7//f/AQAAAAAAAAD8//b/AQAAAAAAAAD8//f/AQAAAAAAAAD8//j/AQAAAAAAAAD7//j/AQAAAAAAAAD9//f/AQAAAAAAAAD+//j/AQAAAAAAAAD+//n/AQAAAAAAAAD///n/AQAAAAAAAAAAAPn/AQAAAAAAAAAAAPj/AQAAAAAAAAD///j/AQAAAAAAAADl//v/AQAAAAAAAADk//v/AQAAAAAAAADk//r/AQAAAAAAAADj//r/AQAAAAAAAADj//n/AQAAAAAAAADj//j/AQAAAAAAAADk//j/AQAAAAAAAADl//j/AQAAAAAAAADm//j/AQAAAAAAAADm//n/AQAAAAAAAADl//n/AQAAAAAAAADk//n/AQAAAAAAAADl//r/AQAAAAAAAADm//r/AQAAAAAAAADm//v/AQAAAAAAAADm//z/AQAAAAAAAADl//z/AQAAAAAAAADu//T/AQAAAAAAAADv//T/AQAAAAAAAADw//T/AQAAAAAAAADx//P/AQAAAAAAAADy//P/AQAAAAAAAADy//L/AQAAAAAAAADx//L/AQAAAAAAAADx//H/AQAAAAAAAADw//H/AQAAAAAAAADw//L/AQAAAAAAAADw//P/AQAAAAAAAADx//T/AQAAAAAAAADy//T/AQAAAAAAAADv//P/AQAAAAAAAADu//P/AQAAAAAAAAD1//X/AQAAAAIAAADp//T/AQAAAAIAAADr//P/AQAAAAIAAADl//T/AQAAAAIAAADm//P/AQAAAAIAAADn//X/AQAAAAIAAADi//X/AgAAAAAAAADi//T/AgAAAAAAAADi//P/AgAAAAAAAADi//L/AgAAAAAAAADi//H/AgAAAAAAAADi//D/AgAAAAAAAADh//D/AgAAAAAAAADg//D/AgAAAAAAAADf//D/AgAAAAAAAADe//D/AgAAAAAAAADd//D/AgAAAAAAAADc//D/AgAAAAAAAADc//H/AgAAAAAAAADb//H/AgAAAAAAAADb//L/AgAAAAAAAADb//P/AgAAAAAAAADb//T/AgAAAAAAAADb//X/AgAAAAAAAADb//b/AgAAAAAAAADb//f/AgAAAAAAAADb//j/AgAAAAAAAADc//j/AgAAAAAAAADc//n/AgAAAAAAAADd//n/AgAAAAAAAADe//n/AgAAAAAAAADf//n/AgAAAAAAAADg//n/AgAAAAAAAADh//n/AgAAAAAAAADi//n/AgAAAAAAAADi//j/AgAAAAAAAADe////AAAAAAMAAADi//7/AAAAAAMAAADi/wAAAAAAAAMAAADf//z/AAAAAAMAAADg/wAAAAAAAAMAAADl//7/AAAAAAMAAADd//H/AgAAAAEAAADd//L/AgAAAAEAAADd//P/AgAAAAEAAADd//T/AgAAAAEAAADd//X/AgAAAAEAAADd//b/AgAAAAEAAADd//f/AgAAAAEAAADd//j/AgAAAAEAAADe//H/AgAAAAEAAADe//L/AgAAAAEAAADe//P/AgAAAAEAAADe//T/AgAAAAEAAADe//X/AgAAAAEAAADe//b/AgAAAAEAAADe//f/AgAAAAEAAADe//j/AgAAAAEAAADf//H/AgAAAAEAAADf//L/AgAAAAEAAADf//P/AgAAAAEAAADf//T/AgAAAAEAAADf//X/AgAAAAEAAADf//b/AgAAAAEAAADf//f/AgAAAAEAAADf//j/AgAAAAEAAADg//H/AgAAAAEAAADg//L/AgAAAAEAAADg//P/AgAAAAEAAADg//T/AgAAAAEAAADg//X/AgAAAAEAAADg//b/AgAAAAEAAADg//f/AgAAAAEAAADg//j/AgAAAAEAAADh//H/AgAAAAEAAADh//L/AgAAAAEAAADh//P/AgAAAAEAAADh//T/AgAAAAEAAADh//X/AgAAAAEAAADh//b/AgAAAAEAAADh//f/AgAAAAEAAADh//j/AgAAAAEAAADc//L/AgAAAAEAAADc//P/AgAAAAEAAADc//T/AgAAAAEAAADc//X/AgAAAAEAAADc//b/AgAAAAEAAADc//f/AgAAAAEAAADi//b/AgAAAAEAAADi//f/AgAAAAEAAADp//7/AgAAAAEAAADp////AgAAAAEAAADq//7/AgAAAAEAAADq////AgAAAAEAAADr////AgAAAAEAAADs//7/AgAAAAEAAADs////AgAAAAEAAADt//7/AgAAAAEAAADt////AgAAAAEAAADp//3/AgAAAAEAAADq//3/AgAAAAEAAADr//3/AgAAAAEAAADs//3/AgAAAAEAAADp/wAAAgAAAAEAAADq/wAAAgAAAAEAAADr/wAAAgAAAAEAAADs/wAAAgAAAAEAAAA=")
tile_set = ExtResource("5_l032b")

[node name="PlayerCamera" parent="." instance=ExtResource("3_wppie")]

[node name="PlayerDamage" parent="." instance=ExtResource("3_xo2ng")]

[node name="Border" type="Node2D" parent="."]

[node name="Left" type="StaticBody2D" parent="Border"]
position = Vector2(-1000, 0)
collision_layer = 4
collision_mask = 9

[node name="CollisionShape2D" type="CollisionShape2D" parent="Border/Left"]
shape = SubResource("WorldBoundaryShape2D_vjv4r")

[node name="Right" type="StaticBody2D" parent="Border"]
position = Vector2(1000, 0)
collision_layer = 4
collision_mask = 9

[node name="CollisionShape2D" type="CollisionShape2D" parent="Border/Right"]
shape = SubResource("WorldBoundaryShape2D_pa783")

[node name="Top" type="StaticBody2D" parent="Border"]
position = Vector2(0, -1000)
collision_layer = 4
collision_mask = 9

[node name="CollisionShape2D" type="CollisionShape2D" parent="Border/Top"]
shape = SubResource("WorldBoundaryShape2D_wudsr")

[node name="Bottom" type="StaticBody2D" parent="Border"]
position = Vector2(0, 1000)
collision_layer = 4
collision_mask = 9

[node name="CollisionShape2D" type="CollisionShape2D" parent="Border/Bottom"]
shape = SubResource("WorldBoundaryShape2D_u1xbg")

[node name="LevelSpawner" parent="." instance=ExtResource("7_geyi5")]

[node name="Gems" type="Node2D" parent="."]

[node name="Enemies" type="Node2D" parent="."]

[node name="Player" parent="." node_paths=PackedStringArray("player_damage") instance=ExtResource("1_c1fdt")]
z_index = 1
player_damage = NodePath("../PlayerDamage")

[node name="TileMapLayerTop" type="TileMapLayer" parent="."]
z_index = 2
tile_map_data = PackedByteArray("AADp//3/AgAAAAMAAADq//3/AgAAAAMAAADr//3/AgAAAAMAAADs//3/AgAAAAMAAADs//7/AgAAAAMAAADr//7/AgAAAAMAAADq//7/AgAAAAMAAADp//7/AgAAAAMAAADp////AgAAAAMAAADq////AgAAAAMAAADr////AgAAAAMAAADs////AgAAAAMAAADs/wAAAgAAAAMAAADr/wAAAgAAAAMAAADq/wAAAgAAAAMAAADp/wAAAgAAAAMAAADt////AgAAAAMAAADt//7/AgAAAAMAAADd//H/AgAAAAMAAADd//L/AgAAAAMAAADd//P/AgAAAAMAAADd//T/AgAAAAMAAADd//X/AgAAAAMAAADd//b/AgAAAAMAAADd//f/AgAAAAMAAADd//j/AgAAAAMAAADe//H/AgAAAAMAAADe//L/AgAAAAMAAADe//P/AgAAAAMAAADe//T/AgAAAAMAAADe//X/AgAAAAMAAADe//b/AgAAAAMAAADe//f/AgAAAAMAAADe//j/AgAAAAMAAADf//H/AgAAAAMAAADf//L/AgAAAAMAAADf//P/AgAAAAMAAADf//T/AgAAAAMAAADf//X/AgAAAAMAAADf//b/AgAAAAMAAADf//f/AgAAAAMAAADf//j/AgAAAAMAAADg//H/AgAAAAMAAADg//L/AgAAAAMAAADg//P/AgAAAAMAAADg//T/AgAAAAMAAADg//X/AgAAAAMAAADg//b/AgAAAAMAAADg//f/AgAAAAMAAADg//j/AgAAAAMAAADh//H/AgAAAAMAAADh//L/AgAAAAMAAADh//P/AgAAAAMAAADh//T/AgAAAAMAAADh//X/AgAAAAMAAADh//b/AgAAAAMAAADh//f/AgAAAAMAAADh//j/AgAAAAMAAADi//b/AgAAAAMAAADi//f/AgAAAAMAAADc//L/AgAAAAMAAADc//P/AgAAAAMAAADc//T/AgAAAAMAAADc//X/AgAAAAMAAADc//b/AgAAAAMAAADc//f/AgAAAAMAAAA=")
tile_set = ExtResource("5_l032b")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="Control" type="Control" parent="CanvasLayer/MarginContainer"]
layout_mode = 2
mouse_filter = 2

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/MarginContainer/Control"]
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -73.0
grow_horizontal = 2
grow_vertical = 0
theme_override_constants/separation = 64
alignment = 1

[node name="PlayerDamageDisplay" parent="CanvasLayer/MarginContainer/Control/HBoxContainer" node_paths=PackedStringArray("player_damage") instance=ExtResource("1_sr8ao")]
layout_mode = 2
player_damage = NodePath("../../../../../PlayerDamage")

[node name="CenterContainer" type="CenterContainer" parent="CanvasLayer/MarginContainer/Control/HBoxContainer"]
custom_minimum_size = Vector2(640, 72)
layout_mode = 2

[node name="PlayerHealthBar" parent="CanvasLayer/MarginContainer/Control/HBoxContainer/CenterContainer" node_paths=PackedStringArray("player") instance=ExtResource("5_614nh")]
layout_mode = 2
player = NodePath("../../../../../../Player")

[node name="LevelTime" parent="CanvasLayer/MarginContainer/Control" instance=ExtResource("6_u8prs")]
layout_mode = 1
anchors_preset = 10
anchor_right = 1.0
offset_right = 0.0
offset_bottom = 73.0
grow_horizontal = 2

[node name="LabelFPS" type="Label" parent="CanvasLayer"]
offset_right = 40.0
offset_bottom = 37.0
text = "FPS"

[node name="CanvasLayerGameOver" type="CanvasLayer" parent="."]
layer = 2

[node name="GameOverScreen" parent="CanvasLayerGameOver" instance=ExtResource("13_23rtj")]

[node name="CanvasLayerDialogs" type="CanvasLayer" parent="."]
layer = 3

[connection signal="died" from="Player" to="." method="_on_player_died"]
[connection signal="restarted" from="CanvasLayerGameOver/GameOverScreen" to="." method="_on_game_over_screen_restarted"]
